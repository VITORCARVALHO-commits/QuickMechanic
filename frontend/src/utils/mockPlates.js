// Mock database de placas UK para MVP
export const mockPlatesDatabase = {
  // === UK REGISTRATION PLATES ===
  'AB12CDE': {
    plate: 'AB12 CDE',
    country: 'UK',
    make: 'ford',
    makeName: 'Ford',
    model: 'Fiesta',
    year: '2012',
    color: 'Blue',
    fuel: 'Petrol',
    version: '1.0 EcoBoost',
    category: 'Hatchback',
    power: '125bhp',
    transmission: 'Manual',
    doors: '5',
    engineSize: '998cc'
  },
  'CD34FGH': {
    plate: 'CD34 FGH',
    country: 'UK',
    make: 'volkswagen',
    makeName: 'Volkswagen',
    model: 'Golf',
    year: '2015',
    color: 'Silver',
    fuel: 'Diesel',
    version: '2.0 TDI GT',
    category: 'Hatchback',
    power: '150bhp',
    transmission: 'Manual',
    doors: '5',
    engineSize: '1968cc'
  },
  'GHI9012': {
    plate: 'GHI-9012',
    make: 'chevrolet',
    makeName: 'Chevrolet',
    model: 'Onix',
    year: '2022',
    color: 'Vermelho',
    fuel: 'Flex',
    version: '1.0 Turbo',
    category: 'Hatchback',
    power: '116cv'
  },
  'JKL3456': {
    plate: 'JKL-3456',
    make: 'toyota',
    makeName: 'Toyota',
    model: 'Corolla',
    year: '2023',
    color: 'Preto',
    fuel: 'Híbrido',
    version: '2.0 XEi',
    category: 'Sedan',
    power: '177cv'
  },
  'MNO7890': {
    plate: 'MNO-7890',
    make: 'honda',
    makeName: 'Honda',
    model: 'Civic',
    year: '2021',
    color: 'Cinza',
    fuel: 'Flex',
    version: '2.0 EXL',
    category: 'Sedan',
    power: '155cv'
  },
  'PQR1234': {
    plate: 'PQR-1234',
    make: 'jeep',
    makeName: 'Jeep',
    model: 'Compass',
    year: '2022',
    color: 'Azul',
    fuel: 'Flex',
    version: '1.3 Turbo',
    category: 'SUV',
    power: '185cv'
  },
  'STU5678': {
    plate: 'STU-5678',
    make: 'ford',
    makeName: 'Ford',
    model: 'Ranger',
    year: '2020',
    color: 'Prata',
    fuel: 'Diesel',
    version: '3.2 XLT',
    category: 'Picape',
    power: '200cv'
  },
  'VWX9012': {
    plate: 'VWX-9012',
    make: 'nissan',
    makeName: 'Nissan',
    model: 'Kicks',
    year: '2023',
    color: 'Laranja',
    fuel: 'Flex',
    version: '1.6 S',
    category: 'SUV',
    power: '114cv'
  },
  'YZA3456': {
    plate: 'YZA-3456',
    make: 'hyundai',
    makeName: 'Hyundai',
    model: 'HB20',
    year: '2022',
    color: 'Branco',
    fuel: 'Flex',
    version: '1.0 Turbo',
    category: 'Hatchback',
    power: '120cv'
  },
  'BCD7890': {
    plate: 'BCD-7890',
    make: 'renault',
    makeName: 'Renault',
    model: 'Duster',
    year: '2021',
    color: 'Verde',
    fuel: 'Flex',
    version: '1.6 CVT',
    category: 'SUV',
    power: '120cv'
  },
  'EFG1111': {
    plate: 'EFG-1111',
    make: 'volkswagen',
    makeName: 'Volkswagen',
    model: 'T-Cross',
    year: '2023',
    color: 'Cinza',
    fuel: 'Flex',
    version: '1.4 TSI',
    category: 'SUV',
    power: '150cv'
  },
  'HIJ2222': {
    plate: 'HIJ-2222',
    make: 'fiat',
    makeName: 'Fiat',
    model: 'Toro',
    year: '2022',
    color: 'Preto',
    fuel: 'Diesel',
    version: '2.0 Turbo',
    category: 'Picape',
    power: '170cv'
  },
  'KLM3333': {
    plate: 'KLM-3333',
    make: 'chevrolet',
    makeName: 'Chevrolet',
    model: 'Tracker',
    year: '2023',
    color: 'Vermelho',
    fuel: 'Flex',
    version: '1.2 Turbo',
    category: 'SUV',
    power: '133cv'
  },
  'NOP4444': {
    plate: 'NOP-4444',
    make: 'toyota',
    makeName: 'Toyota',
    model: 'Hilux',
    year: '2022',
    color: 'Branco',
    fuel: 'Diesel',
    version: '2.8 SRX',
    category: 'Picape',
    power: '204cv'
  },
  'QRS5555': {
    plate: 'QRS-5555',
    country: 'BR',
    make: 'honda',
    makeName: 'Honda',
    model: 'HR-V',
    year: '2023',
    color: 'Prata',
    fuel: 'Flex',
    version: '1.5 Turbo',
    category: 'SUV',
    power: '177cv'
  },
  
  // === PLACAS UK (Reino Unido) ===
  'AB12CDE': {
    plate: 'AB12 CDE',
    country: 'UK',
    make: 'ford',
    makeName: 'Ford',
    model: 'Fiesta',
    year: '2012',
    color: 'Blue',
    fuel: 'Petrol',
    version: '1.0 EcoBoost',
    category: 'Hatchback',
    power: '125bhp'
  },
  'CD34FGH': {
    plate: 'CD34 FGH',
    country: 'UK',
    make: 'volkswagen',
    makeName: 'Volkswagen',
    model: 'Golf',
    year: '2015',
    color: 'Silver',
    fuel: 'Diesel',
    version: '2.0 TDI',
    category: 'Hatchback',
    power: '150bhp'
  },
  'EF56IJK': {
    plate: 'EF56 IJK',
    country: 'UK',
    make: 'bmw',
    makeName: 'BMW',
    model: '3 Series',
    year: '2018',
    color: 'Black',
    fuel: 'Diesel',
    version: '320d M Sport',
    category: 'Saloon',
    power: '190bhp'
  },
  'GH67LMN': {
    plate: 'GH67 LMN',
    country: 'UK',
    make: 'audi',
    makeName: 'Audi',
    model: 'A4',
    year: '2017',
    color: 'White',
    fuel: 'Petrol',
    version: '2.0 TFSI',
    category: 'Saloon',
    power: '252bhp'
  },
  'IJ18OPQ': {
    plate: 'IJ18 OPQ',
    country: 'UK',
    make: 'mercedes',
    makeName: 'Mercedes-Benz',
    model: 'C-Class',
    year: '2018',
    color: 'Grey',
    fuel: 'Diesel',
    version: 'C220d AMG Line',
    category: 'Saloon',
    power: '194bhp'
  },
  'KL20RST': {
    plate: 'KL20 RST',
    country: 'UK',
    make: 'landrover',
    makeName: 'Land Rover',
    model: 'Range Rover Sport',
    year: '2020',
    color: 'Black',
    fuel: 'Diesel',
    version: 'HSE Dynamic',
    category: 'SUV',
    power: '306bhp'
  },
  'MN22UVW': {
    plate: 'MN22 UVW',
    country: 'UK',
    make: 'nissan',
    makeName: 'Nissan',
    model: 'Qashqai',
    year: '2022',
    color: 'Red',
    fuel: 'Petrol',
    version: '1.3 DIG-T',
    category: 'SUV',
    power: '140bhp'
  },
  'OP19XYZ': {
    plate: 'OP19 XYZ',
    country: 'UK',
    make: 'vauxhall',
    makeName: 'Vauxhall',
    model: 'Corsa',
    year: '2019',
    color: 'White',
    fuel: 'Petrol',
    version: '1.2 Turbo',
    category: 'Hatchback',
    power: '100bhp'
  },
  'QR21ABC': {
    plate: 'QR21 ABC',
    country: 'UK',
    make: 'mini',
    makeName: 'Mini',
    model: 'Cooper',
    year: '2021',
    color: 'British Racing Green',
    fuel: 'Petrol',
    version: 'Cooper S',
    category: 'Hatchback',
    power: '178bhp'
  },
  'ST23DEF': {
    plate: 'ST23 DEF',
    country: 'UK',
    make: 'tesla',
    makeName: 'Tesla',
    model: 'Model 3',
    year: '2023',
    color: 'Pearl White',
    fuel: 'Electric',
    version: 'Long Range',
    category: 'Saloon',
    power: '346bhp'
  },
  'UV17GHI': {
    plate: 'UV17 GHI',
    country: 'UK',
    make: 'mazda',
    makeName: 'Mazda',
    model: 'CX-5',
    year: '2017',
    color: 'Red',
    fuel: 'Diesel',
    version: '2.2 Skyactiv-D',
    category: 'SUV',
    power: '175bhp'
  },
  'WX24JKL': {
    plate: 'WX24 JKL',
    country: 'UK',
    make: 'hyundai',
    makeName: 'Hyundai',
    model: 'Tucson',
    year: '2024',
    color: 'Blue',
    fuel: 'Hybrid',
    version: '1.6 T-GDi',
    category: 'SUV',
    power: '230bhp'
  },
  'YZ16MNO': {
    plate: 'YZ16 MNO',
    country: 'UK',
    make: 'peugeot',
    makeName: 'Peugeot',
    model: '3008',
    year: '2016',
    color: 'Silver',
    fuel: 'Diesel',
    version: '1.6 BlueHDi',
    category: 'SUV',
    power: '120bhp'
  },
  'AB70PQR': {
    plate: 'AB70 PQR',
    country: 'UK',
    make: 'jaguar',
    makeName: 'Jaguar',
    model: 'F-Pace',
    year: '2020',
    color: 'Santorini Black',
    fuel: 'Diesel',
    version: '2.0d R-Sport',
    category: 'SUV',
    power: '204bhp'
  },
  'CD19STU': {
    plate: 'CD19 STU',
    country: 'UK',
    make: 'volvo',
    makeName: 'Volvo',
    model: 'XC40',
    year: '2019',
    color: 'Denim Blue',
    fuel: 'Petrol',
    version: 'T4 R-Design',
    category: 'SUV',
    power: '190bhp'
  }
};

// Função para buscar placa (simula API)
export const searchPlate = (plateInput) => {
  return new Promise((resolve, reject) => {
    // Simulate API delay
    setTimeout(() => {
      // Remove hífens e espaços, deixa só letras e números
      const cleanPlate = plateInput.replace(/[-\s]/g, '').toUpperCase();
      
      // Busca no banco mock
      const vehicleData = mockPlatesDatabase[cleanPlate];
      
      if (vehicleData) {
        resolve({
          success: true,
          data: vehicleData
        });
      } else {
        reject({
          success: false,
          message: 'Plate not found in our database. / Placa não encontrada em nossa base de dados.'
        });
      }
    }, 800); // Simula latência de API
  });
};

// Função para validar formato de placa brasileira ou UK
export const validatePlateFormat = (plate) => {
  // Formato Brasil: ABC1234, ABC-1234, ABC 1234 ou Mercosul ABC1D23
  const brazilPlateRegex = /^[A-Z]{3}[-\s]?\d{4}$|^[A-Z]{3}\d[A-Z]\d{2}$/i;
  
  // Formato UK: AB12 CDE, AB12CDE (2 letras, 2 números, 3 letras)
  const ukPlateRegex = /^[A-Z]{2}\d{2}[-\s]?[A-Z]{3}$/i;
  
  return brazilPlateRegex.test(plate) || ukPlateRegex.test(plate);
};

// Função para detectar país da placa
export const detectPlateCountry = (plate) => {
  const cleanPlate = plate.replace(/[-\s]/g, '').toUpperCase();
  
  // UK plates: 2 letters + 2 numbers + 3 letters
  const ukPattern = /^[A-Z]{2}\d{2}[A-Z]{3}$/;
  if (ukPattern.test(cleanPlate)) {
    return 'UK';
  }
  
  // Brazil plates: 3 letters + 4 numbers or Mercosul format
  const brazilPattern = /^[A-Z]{3}\d{4}$|^[A-Z]{3}\d[A-Z]\d{2}$/;
  if (brazilPattern.test(cleanPlate)) {
    return 'BR';
  }
  
  return null;
};
